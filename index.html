<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Global AI Model Observatory 2026</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Fraunces:wght@700;900&family=DM+Sans:wght@400;500;700&family=JetBrains+Mono:wght@400;600&display=swap" rel="stylesheet">
    <style>
        /* 기존 스타일과 동일 - 생략 가능 */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'DM Sans', sans-serif; background: linear-gradient(135deg, #0a0e27 0%, #1a1147 50%, #2d1b47 100%); color: #e8e6f0; overflow-x: hidden; }
        .hero-title { font-family: 'Fraunces', serif; font-weight: 900; background: linear-gradient(135deg, #00fff2 0%, #a78bfa 50%, #f472b6 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; letter-spacing: -0.03em; line-height: 1.1; }
        .section-title { font-family: 'Fraunces', serif; font-weight: 700; letter-spacing: -0.02em; }
        .mono { font-family: 'JetBrains Mono', monospace; }
        .glass { background: rgba(255, 255, 255, 0.03); backdrop-filter: blur(20px); border: 1px solid rgba(255, 255, 255, 0.08); box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3); }
        .glass-strong { background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(30px); border: 1px solid rgba(255, 255, 255, 0.12); }
        @keyframes float { 0%, 100% { transform: translateY(0px) rotate(0deg); } 50% { transform: translateY(-20px) rotate(5deg); } }
        @keyframes pulse-glow { 0%, 100% { box-shadow: 0 0 20px rgba(167, 139, 250, 0.3); } 50% { box-shadow: 0 0 40px rgba(167, 139, 250, 0.6); } }
        .float-animation { animation: float 6s ease-in-out infinite; }
        .pulse-glow-animation { animation: pulse-glow 3s ease-in-out infinite; }
        .tab-button { position: relative; transition: all 0.3s ease; }
        .tab-button.active { color: #00fff2; }
        .tab-button.active::after { content: ''; position: absolute; bottom: -2px; left: 0; right: 0; height: 3px; background: linear-gradient(90deg, #00fff2, #a78bfa); border-radius: 3px; }
        .model-card { transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); position: relative; overflow: hidden; }
        .model-card::before { content: ''; position: absolute; top: 0; left: -100%; width: 100%; height: 100%; background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent); transition: left 0.6s; }
        .model-card:hover::before { left: 100%; }
        .model-card:hover { transform: translateY(-8px) scale(1.02); box-shadow: 0 20px 60px rgba(167, 139, 250, 0.4); }
        .rank-badge { background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%); box-shadow: 0 4px 20px rgba(251, 191, 36, 0.4); }
        .stat-bar { height: 8px; background: rgba(255, 255, 255, 0.1); border-radius: 10px; overflow: hidden; position: relative; }
        .stat-fill { height: 100%; background: linear-gradient(90deg, #00fff2, #a78bfa); border-radius: 10px; transition: width 1s cubic-bezier(0.4, 0, 0.2, 1); box-shadow: 0 0 10px rgba(0, 255, 242, 0.5); }
        .update-indicator { display: inline-flex; align-items: center; gap: 6px; padding: 6px 14px; background: rgba(0, 255, 242, 0.1); border: 1px solid rgba(0, 255, 242, 0.3); border-radius: 20px; font-size: 12px; color: #00fff2; }
        .update-dot { width: 8px; height: 8px; background: #00fff2; border-radius: 50%; animation: pulse 2s ease-in-out infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; transform: scale(1); } 50% { opacity: 0.5; transform: scale(1.2); } }
        .price-tag { background: linear-gradient(135deg, rgba(34, 197, 94, 0.2), rgba(16, 185, 129, 0.2)); border: 1px solid rgba(34, 197, 94, 0.3); color: #10b981; padding: 4px 10px; border-radius: 12px; font-size: 13px; font-weight: 600; }
        .badge { padding: 4px 10px; border-radius: 12px; font-size: 11px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; }
        .badge-new { background: linear-gradient(135deg, #ec4899, #f472b6); color: white; }
        .badge-top { background: linear-gradient(135deg, #fbbf24, #f59e0b); color: #1a1147; }
        .scroll-progress { position: fixed; top: 0; left: 0; right: 0; height: 3px; background: linear-gradient(90deg, #00fff2, #a78bfa, #f472b6); transform-origin: left; z-index: 9999; }
        .loading-spinner { border: 3px solid rgba(255, 255, 255, 0.1); border-top: 3px solid #00fff2; border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .error-message { background: rgba(239, 68, 68, 0.1); border: 1px solid rgba(239, 68, 68, 0.3); color: #f87171; padding: 1rem; border-radius: 12px; }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <script type="text/babel">
        const { useState, useEffect } = React;
        
        // API URL 자동 감지 (프로덕션/개발 환경)
        const getApiBaseUrl = () => {
            // 같은 도메인에서 제공되는 경우 (Nginx 프록시)
            if (window.location.hostname !== 'localhost' && window.location.hostname !== '127.0.0.1') {
                return '/api'; // Nginx가 /api를 백엔드로 프록시
            }
            // 로컬 개발 환경
            return 'http://localhost:8000/api';
        };
        
        const API_BASE_URL = getApiBaseUrl();
        
        // API 서비스 클래스
        class AIDataService {
            async fetchData(endpoint) {
                try {
                    const response = await fetch(`${API_BASE_URL}${endpoint}`);
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    return await response.json();
                } catch (error) {
                    console.error(`Error fetching ${endpoint}:`, error);
                    throw error;
                }
            }
            
            async getLLMModels() { return this.fetchData('/models/llm'); }
            async getImageModels() { return this.fetchData('/models/image'); }
            async getVideoModels() { return this.fetchData('/models/video'); }
            async getCountries() { return this.fetchData('/countries'); }
            async getInsights() { return this.fetchData('/insights'); }
            async getStatus() { return this.fetchData('/status'); }
        }
        
        const service = new AIDataService();
        
        function Dashboard() {
            const [activeTab, setActiveTab] = useState('llm');
            const [llmModels, setLlmModels] = useState([]);
            const [imageModels, setImageModels] = useState([]);
            const [videoModels, setVideoModels] = useState([]);
            const [countries, setCountries] = useState([]);
            const [insights, setInsights] = useState([]);
            const [lastUpdate, setLastUpdate] = useState(null);
            const [loading, setLoading] = useState(true);
            const [error, setError] = useState(null);
            const [scrollProgress, setScrollProgress] = useState(0);
            
            useEffect(() => {
                const handleScroll = () => {
                    const windowHeight = window.innerHeight;
                    const documentHeight = document.documentElement.scrollHeight - windowHeight;
                    const scrolled = window.scrollY;
                    const progress = (scrolled / documentHeight) * 100;
                    setScrollProgress(progress);
                };
                window.addEventListener('scroll', handleScroll);
                return () => window.removeEventListener('scroll', handleScroll);
            }, []);
            
            useEffect(() => {
                loadAllData();
            }, []);
            
            useEffect(() => {
                const interval = setInterval(() => {
                    loadAllData();
                }, 300000);
                return () => clearInterval(interval);
            }, []);
            
            const loadAllData = async () => {
                try {
                    setLoading(true);
                    setError(null);
                    
                    const [llm, image, video, countriesData, insightsData, status] = await Promise.all([
                        service.getLLMModels(),
                        service.getImageModels(),
                        service.getVideoModels(),
                        service.getCountries(),
                        service.getInsights(),
                        service.getStatus()
                    ]);
                    
                    setLlmModels(llm);
                    setImageModels(image);
                    setVideoModels(video);
                    setCountries(countriesData);
                    setInsights(insightsData);
                    setLastUpdate(new Date(status.last_update));
                    setLoading(false);
                } catch (err) {
                    setError('데이터를 불러오는데 실패했습니다.');
                    setLoading(false);
                    console.error('Load error:', err);
                }
            };
            
            const getModels = () => {
                switch(activeTab) {
                    case 'llm': return llmModels;
                    case 'image': return imageModels;
                    case 'video': return videoModels;
                    default: return llmModels;
                }
            };
            
            const getTitle = () => {
                switch(activeTab) {
                    case 'llm': return 'LLM 모델';
                    case 'image': return '이미지 생성 모델';
                    case 'video': return '비디오 생성 모델';
                    default: return 'LLM 모델';
                }
            };
            
            if (loading && !lastUpdate) {
                return (
                    <div className="min-h-screen flex items-center justify-center">
                        <div className="text-center">
                            <div className="loading-spinner mx-auto mb-4"></div>
                            <p className="text-gray-400">데이터를 불러오는 중...</p>
                        </div>
                    </div>
                );
            }
            
            if (error && !lastUpdate) {
                return (
                    <div className="min-h-screen flex items-center justify-center p-6">
                        <div className="error-message max-w-2xl text-center">
                            <h2 className="text-2xl font-bold mb-4">⚠️ 연결 오류</h2>
                            <p className="mb-4">{error}</p>
                            <button 
                                onClick={loadAllData}
                                className="px-6 py-3 bg-cyan-500 hover:bg-cyan-600 rounded-lg transition-colors"
                            >
                                다시 시도
                            </button>
                        </div>
                    </div>
                );
            }
            
            return (
                <div className="min-h-screen">
                    <div className="scroll-progress" style={{ transform: `scaleX(${scrollProgress / 100})` }}></div>
                    
                    <div className="relative overflow-hidden">
                        <div className="absolute inset-0 opacity-30">
                            <div className="absolute top-20 left-10 w-72 h-72 bg-purple-500 rounded-full blur-3xl float-animation"></div>
                            <div className="absolute bottom-20 right-10 w-96 h-96 bg-cyan-400 rounded-full blur-3xl float-animation" style={{ animationDelay: '2s' }}></div>
                            <div className="absolute top-1/2 left-1/2 w-80 h-80 bg-pink-400 rounded-full blur-3xl float-animation" style={{ animationDelay: '4s' }}></div>
                        </div>
                        
                        <div className="container mx-auto px-6 py-20 relative z-10">
                            <div className="text-center mb-12">
                                <div className="flex justify-center items-center gap-4 mb-6">
                                    <div className="update-indicator">
                                        <div className="update-dot"></div>
                                        <span className="mono">LIVE</span>
                                    </div>
                                    {lastUpdate && (
                                        <span className="text-sm text-gray-400 mono">
                                            Last updated: {lastUpdate.toLocaleTimeString('ko-KR')}
                                        </span>
                                    )}
                                </div>
                                <h1 className="hero-title text-7xl md:text-8xl mb-6">
                                    Global AI Model Observatory 2026
                                </h1>
                                <p className="text-xl text-gray-300 max-w-3xl mx-auto leading-relaxed">
                                    실시간으로 세계 최고의 AI 모델을 비교하고 추적하세요.
                                </p>
                            </div>
                            
                            <div className="grid grid-cols-2 md:grid-cols-4 gap-6 max-w-5xl mx-auto mb-16">
                                <div className="glass-strong rounded-2xl p-6 text-center pulse-glow-animation">
                                    <div className="text-4xl font-bold mono text-cyan-400">{llmModels.length + imageModels.length + videoModels.length}</div>
                                    <div className="text-sm text-gray-400 mt-2">추적 모델</div>
                                </div>
                                <div className="glass-strong rounded-2xl p-6 text-center pulse-glow-animation" style={{ animationDelay: '0.5s' }}>
                                    <div className="text-4xl font-bold mono text-purple-400">{countries.length}</div>
                                    <div className="text-sm text-gray-400 mt-2">국가 순위</div>
                                </div>
                                <div className="glass-strong rounded-2xl p-6 text-center pulse-glow-animation" style={{ animationDelay: '1s' }}>
                                    <div className="text-4xl font-bold mono text-pink-400">16.3%</div>
                                    <div className="text-sm text-gray-400 mt-2">글로벌 AI 도입률</div>
                                </div>
                                <div className="glass-strong rounded-2xl p-6 text-center pulse-glow-animation" style={{ animationDelay: '1.5s' }}>
                                    <div className="text-4xl font-bold mono text-orange-400">LIVE</div>
                                    <div className="text-sm text-gray-400 mt-2">실시간 업데이트</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    {/* 나머지 컴포넌트는 기존과 동일하므로 생략... */}
                    {/* Model Comparison, Country Rankings, Insights 섹션 */}
                    
                    <div className="container mx-auto px-6 py-12 text-center">
                        <div className="glass rounded-2xl p-8">
                            <h3 className="text-2xl font-bold mb-4">데이터 소스</h3>
                            <p className="text-sm text-gray-400 leading-relaxed max-w-4xl mx-auto mb-4">
                                실시간 API 연동 - Artificial Analysis, Arena AI, OpenRouter, Stanford HAI
                            </p>
                            <div className="mt-6 mono text-xs text-gray-500">
                                Deployed on Web Server • {lastUpdate && `Last updated: ${lastUpdate.toLocaleString('ko-KR')}`}
                            </div>
                        </div>
                    </div>
                </div>
            );
        }
        
        ReactDOM.render(<Dashboard />, document.getElementById('root'));
    </script>
</body>
</html>
